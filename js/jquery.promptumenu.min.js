/*
 * promptuMenu - jQuery Plugin
 * https://github.com/natrixnatrix89/promptu-menu
 *
 * Copyright (c) 2012 Janis Zarzeckis (http://natrixnatrix89.net)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
(function(n){n.fn.promptumenu=function(g){var d=n.extend({columns:3,rows:4,direction:"horizontal",width:"auto",height:"auto",duration:500,pages:!0,inertia:200},g);return this.each(function(){var g,k,u,v,b=n(this),f,e={x:0,y:1,page:1},h=0,l=0,j=1,r=1,o={go_to:function(a,q){void 0===q&&(q="swing");"vertical"==d.direction?b.animate({top:-1*(a-1)*f.height},d.duration,q):b.animate({left:-1*(a-1)*f.width},d.duration,q);b.parent(".promptumenu_window").find(".promptumenu_nav a.active").removeClass("active");
b.parent(".promptumenu_window").find(".promptumenu_nav a:nth-child("+a+")").addClass("active");r=a},next_page:function(){o.go_to(r+1)},prev_page:function(){o.go_to(r-1)}};if(b.data("promptumenu"))console.error("You are calling promptumenu for an element more than twice. Please have a look.");else{b.data("promptumenu",!0);f={width:"auto"==d.width?b.width():d.width,height:"auto"==d.height?b.height():d.height,padding:0,display:"block",overflow:"hidden"};h=f.width/d.columns;l=f.height/d.rows;b.wrap('<div class="promptumenu_window" />');
b.parent(".promptumenu_window").css(f);b.css({display:"block",position:"absolute","list-style":"none",overflow:"visible",height:"auto",width:"auto",top:0,left:0,margin:0,padding:0});b.children("li").css({display:"block",position:"absolute",margin:0});b.children("li").each(function(){var a=n(this);e.x+=1;if(e.x>d.columns)e.x=1,e.y+=1;if(e.y>d.rows)e.x=1,e.y=1,e.page+=1;a.data("layout",n.extend({},e));"vertical"==d.direction?(a.css({top:Math.round(e.y*l-l/2-a.height()/2+(e.page-1)*f.height),left:Math.round(e.x*
h-h/2-a.width()/2)}),a.find("img").bind("load",function(){var b=a.data("layout");a.css({top:Math.round(b.y*l-l/2-a.height()/2+(b.page-1)*f.height),left:Math.round(b.x*h-h/2-a.width()/2)})})):(a.css({top:Math.round(e.y*l-l/2-a.height()/2),left:Math.round(e.x*h-h/2-a.width()/2+(e.page-1)*f.width)}),a.find("img").bind("load",function(){var b=a.data("layout");a.css({top:Math.round(b.y*l-l/2-a.height()/2),left:Math.round(b.x*h-h/2-a.width()/2+(b.page-1)*f.width)})}))});j=e.page;b.data("promptumenu_page_count",
j);if(1<j&&!0==d.pages){var s='<a class="active">Page 1</a>';for(i=2;i<=j;i++)s=s+"<a>Page "+i+"</a>";b.parent("div.promptumenu_window").append('<div class="promptumenu_nav">'+s+"</div>");b.parent("div.promptumenu_window").find(".promptumenu_nav a").bind("click.promptumenu",function(){o.go_to(n(this).index()+1)})}"vertical"==d.direction?b.css({width:f.width,height:f.height*j}):b.css({width:f.width*j,height:f.height});b.bind("mousedown.promptumenu",function(a){a.preventDefault();b.stop(!0,!1);var e=
b.position(),c=a.pageX,g=a.pageY,h=0,l=0,m=[];n(document).bind("mousemove.promptumenu",function(a){a.preventDefault();for(var f={time:(new Date).getTime(),x:a.pageX,y:a.pageY};4<m.length;)m.shift();"vertical"==d.direction?(l=a.pageY-g,b.css("top",e.top+l)):(h=a.pageX-c,b.css("left",e.left+h));m.push(f)});n(document).bind("mouseup.promptumenu",function(a){a.preventDefault();n(document).unbind(".promptumenu");var c=m[0],g=(new Date).getTime()-c.time,k=(a.pageX-c.x)/g,a=(a.pageY-c.y)/g;"vertical"==d.direction?
(c=e.top+l+a*d.inertia,c<-1*f.height*(j-1)?c=-1*f.height*(j-1):0<c&&(c=0),d.pages?(k=Math.round(-c/f.height),o.go_to(k+1,"inertia")):b.animate({top:c},Math.abs(a*d.inertia),"inertia")):(c=e.left+h+k*d.inertia,c<-1*f.width*(j-1)?c=-1*f.width*(j-1):0<c&&(c=0),d.pages?(k=Math.round(-c/f.width),o.go_to(k+1,"inertia")):b.animate({left:c},Math.abs(k*d.inertia),"inertia"))})});try{var p,m=[],w=function(a){a.preventDefault();for(var f={time:(new Date).getTime(),x:a.touches[0].pageX,y:a.touches[0].pageY};4<
m.length;)m.shift();"vertical"==d.direction?(g=a.touches[0].pageY-u,b.css("top",p.top+g)):(k=a.touches[0].pageX-v,b.css("left",p.left+k));m.push(f)},t=function(a){a.preventDefault();document.removeEventListener("touchmove",w,!1);document.removeEventListener("touchend",t,!1);var e=m[0],c=m[m.length-1],h=c.time-e.time,a=(c.x-e.x)/h,e=(c.y-e.y)/h;"vertical"==d.direction?(c=p.top+g+e*d.inertia,c<-1*f.height*(j-1)?c=-1*f.height*(j-1):0<c&&(c=0),d.pages?(a=Math.round(-c/f.height),o.go_to(a+1,"inertia")):
b.animate({top:c},Math.abs(e*d.inertia),"inertia")):(c=p.left+k+a*d.inertia,c<-1*f.width*(j-1)?c=-1*f.width*(j-1):0<c&&(c=0),d.pages?(a=Math.round(-c/f.width),o.go_to(a+1,"inertia")):b.animate({left:c},Math.abs(a*d.inertia),"inertia"))};b[0].addEventListener("touchstart",function(a){b.unbind(".promptumenu");a.preventDefault();b.stop(!0,!1);p=b.position();v=a.touches[0].pageX;u=a.touches[0].pageY;k=0;g=0;m=[];document.addEventListener("touchmove",w,!1);document.addEventListener("touchend",t,!1);document.addEventListener("touchcancel",
t,!1)},!1)}catch(y){}}})}})(jQuery);jQuery.extend(jQuery.easing,{inertia:function(n,g,d,x,k){return x*((g=g/k-1)*g*g+1)+d}});